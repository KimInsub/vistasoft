function flipTSeries(vw,scanList)%% function flipTSeries(vw,[scanList])%% Flips (time reverses) the time series.% This is useful for averaging normal and reversed retinotopies% to remove the hemodynamic delay.%% scanList: vector of scan numbers to flip. Default: prompt user.%% If you change this function make parallel changes in:%    shiftTSeries% % djh, 6/2001if ~exist('scanList','var')    scanList = er_selectScans(vw);endwaitHandle = mrvWaitbar(0,'Flipping (time-reversing) tSeries.  Please wait...');for iScan=1:length(scanList)    scan = scanList(iScan);    tSeriesFull = [];    dimNum = 0;        if strcmpi(viewGet(vw, 'viewType'), 'inplane')        [~, nii] = loadtSeries(vw, scan);        data = niftiGet(nii, 'data');        data = flip(data, 4);        nii = niftiSet(nii, 'data', data);        savetSeries([],vw,scan, [], nii);    else        for slice=sliceList(vw,scan)            tSeries = loadtSeries(vw, scan, slice);            dimNum = numel(size(tSeries));            tSeries = flipud(tSeries);            tSeriesFull(slice) = cat(dimNum + 1, tSeriesFull, tSeries);        end                if dimNum == 3            tSeriesFull = reshape(tSeriesFull,[1,2,4,3]);        end %if                savetSeries(tSeriesFull,vw,scan);    end        mrvWaitbar(iScan/length(scanList))endclose(waitHandle);return